{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","App.module.css","components/Searchbar/Searchbar.js","services/apiImage.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","components/Loader/Loader.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","handleChange","event","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","styles","this","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autocomplete","autofocus","placeholder","onChange","Component","filter","page","axios","get","then","response","data","ImageGalleryItem","id","src","alt","largeImageURL","onClick","largeimageurl","ImageGalleryItem_image","ImageGallery","images","map","webformatURL","tags","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleOverlayClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","url","Button","App","color","height","width","timeout","React","showModal","largeImage","totalHits","isLoading","error","handleSearch","fetchImage","options","apiImage","hits","prevState","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","showLargeImage","toggleModal","prevProps","app","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.85941a52.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2mN4-\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__3TJmd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1EZOR\",\"Modal\":\"Modal_Modal__3KrNW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__8eU_N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__16yX1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__27Mky\",\"error\":\"App_error__3on7p\"};","import { Component } from 'react';\r\nimport styles from './Searchbar.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = event => {\r\n    this.setState({ query: event.currentTarget.value });\r\n  };\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchForm_button}>\r\n            <span className={styles.SearchForm_button_label}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchForm_input}\r\n            type=\"text\"\r\n            autocomplete=\"off\"\r\n            autofocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.query}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Searchbar;\r\n","import axios from 'axios';\r\n\r\n// const apiKey = '9657010-5b32a47b9f15e54eb73ad95a0';\r\n// const baseURL = 'https://pixabay.com/api/';\r\nconst fetchImage = ({ filter = '', page = 1 }) => {\r\n  return axios\r\n    .get(\r\n      `https://pixabay.com/api/?q=${filter}&page=${page}&key=9657010-5b32a47b9f15e54eb73ad95a0&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n    .then(response => response.data);\r\n};\r\nexport default { fetchImage };\r\n","import React from 'react';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\n//import PropTypes from 'prop-types';\r\n\r\nconst ImageGalleryItem = ({ id, src, alt, largeImageURL, onClick }) => {\r\n  return (\r\n    <li className={styles.ImageGalleryItem} key={id}>\r\n      <img\r\n        src={src}\r\n        alt={alt}\r\n        largeimageurl={largeImageURL}\r\n        onClick={onClick}\r\n        className={styles.ImageGalleryItem_image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nconst ImageGallery = ({ images, onClick }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(({ id, webformatURL, tags, largeImageURL }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            src={webformatURL}\r\n            alt={tags}\r\n            largeimageurl={largeImageURL}\r\n            onClick={() => onClick(largeImageURL)}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  hits: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.number.isRequired,\r\n      webformatURL: PropTypes.string.isRequired,\r\n      largeImageURL: PropTypes.string.isRequired,\r\n      tags: PropTypes.string.isRequired,\r\n    }),\r\n  ),\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\nexport default ImageGallery;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport styles from './Modal.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    //console.log('Modal componentDidMount');\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    //console.log('Modal componentWillUnmount');\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  render() {\r\n    return createPortal(\r\n      <div className={styles.Overlay} onClick={this.handleOverlayClick}>\r\n        <div className={styles.Modal}>\r\n          {this.props.children}\r\n          <img src={this.props.url} alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button className={styles.Button} type=\"button\" onClick={onClick}>\r\n      Load More\r\n    </button>\r\n  );\r\n};\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nexport default class App extends React.Component {\r\n  //other logic\r\n  render() {\r\n    return (\r\n      <Loader\r\n        type=\"Puff\"\r\n        color=\"#3f51b5\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\n\nimport Searchbar from './components/Searchbar';\nimport apiImage from './services/apiImage';\n\nimport ImageGallery from './components/ImageGallery';\nimport Modal from './components/Modal';\n\nimport Button from './components/Button';\nimport Loader from './components/Loader';\n\nimport styles from './App.module.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    page: 1,\n    filter: '',\n    showModal: false,\n    largeImage: '',\n    totalHits: 0,\n\n    isLoading: false,\n    error: null,\n  };\n  // проерка, что в стэйт уже новое значение, пора делать запрос\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.filter !== this.state.filter) {\n      this.fetchImage();\n    }\n  }\n  //управляем запросом\n  handleSearch = query => {\n    if (query !== '') {\n      this.setState({ filter: query, page: 1, images: [] });\n    }\n  };\n\n  //получение ответа с бекэнда, и пушим массив с картинками\n  fetchImage = () => {\n    const { page, filter } = this.state;\n    const options = {\n      filter,\n      page,\n    };\n    this.setState({ isLoading: true });\n    apiImage\n      .fetchImage(options)\n      .then(({ hits, totalHits }) => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          page: prevState.page + 1,\n          totalHits: totalHits,\n        }));\n        if (page !== 1) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  // запись нового большого изображения в стейт\n  showLargeImage = url => {\n    this.setState({ largeImage: url });\n    this.toggleModal();\n  };\n\n  //закрытие/открытие модального окна\n  toggleModal = () => {\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n    }));\n  };\n\n  render() {\n    const { images, showModal, isLoading, error, totalHits } = this.state;\n    return (\n      <div className={styles.app}>\n        {error && <h2 className={error}>Something wrong</h2>}\n        <Searchbar onSubmit={this.handleSearch} />\n\n        <ImageGallery images={images} onClick={this.showLargeImage} />\n\n        {showModal && (\n          <Modal onClose={this.toggleModal} url={this.state.largeImage}></Modal>\n        )}\n\n        {isLoading && <Loader />}\n        {images.length > 0 && images.length !== totalHits && !isLoading && (\n          <Button onClick={this.fetchImage} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1n2NL\",\"SearchForm\":\"Searchbar_SearchForm__1Gtk9\",\"SearchForm_button\":\"Searchbar_SearchForm_button__23Zdg\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__1t8bN\",\"SearchForm_input\":\"Searchbar_SearchForm_input__2s-JA\"};"],"sourceRoot":""}